[
 {
  "allow_guest": 0,
  "api_method": "create_packing_list_from_invoice",
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2025-05-11 21:19:34.403104",
  "module": null,
  "name": "create_packing_list_from_invoice",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": null,
  "script": "# Fetch the Sales Invoice\r\n#for example if posting date is also sent by client run_script\r\np_date = frappe.form_dict.posting_date\r\ninvoice = frappe.get_doc('Sales Invoice', frappe.form_dict.sales_invoice_name) #read the data of sales invooice against given sales_invoice_name and store into invoice variable\r\n\r\n# Iterate over items\r\nchild = []\r\nfor item in invoice.items: #iterate over child table called items\r\n    #append into a new list\r\n    child.append( { \"doctype\":\"Packing List Item\",\r\n        'item': item.item_code, #fields of child table\r\n        'qty': item.qty\r\n    })\r\n    \r\n# Create Packing List\r\npacking_list = frappe.get_doc(\r\n    {\"doctype\":'Packing List',\r\n    \"date\":invoice.posting_date,\r\n    \"customer\": invoice.customer,\r\n    \"customer_address\": invoice.customer_address,\r\n    \"items\":child #child table\r\n    #\"dc_no\":invoice.items[0].dc_no #fetch the dc_no from invoice child table row 1 and insert into packing list parent form field.\r\n}).insert(ignore_permissions=True)\r\n\r\n#if we want to save the packing list link into sales invoice\r\n# invoice.name_of_field_for_link = packing_list.name\r\n# invoice.save()\r\n#end\r\nfrappe.response['message'] = packing_list.name #response back to server",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2025-10-08 02:47:45.520895",
  "module": null,
  "name": "GL Entry",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "GL Entry",
  "script": "\r\nif doc.voucher_type != \"Journal Entry\" and doc.usd_to_pkr_rate and doc.usd_to_pkr_rate > 0:\r\n\r\n   \r\n    if doc.debit_in_pkr:\r\n        doc.debit = doc.debit_in_pkr / doc.usd_to_pkr_rate\r\n    if doc.debit:\r\n        doc.debit_in_pkr = doc.debit * doc.usd_to_pkr_rate\r\n\r\n   \r\n    if doc.credit_in_pkr:\r\n        doc.credit = doc.credit_in_pkr / doc.usd_to_pkr_rate\r\n    if doc.credit:\r\n        doc.credit_in_pkr = doc.credit * doc.usd_to_pkr_rate\r\n",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Save",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2025-11-05 21:44:49.982228",
  "module": null,
  "name": "Employee Attendance",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Employee Attendance",
  "script": "\r\n\r\nfor row in doc.table1:\r\n    if row.check_out_1 and row.shift_out and row.early and row.weekday:\r\n        check_out_parts = [int(x) for x in str(row.check_out_1).split(\":\")]\r\n        shift_out_parts = [int(x) for x in str(row.shift_out).split(\":\")]\r\n\r\n        check_out_seconds = check_out_parts[0]*3600 + check_out_parts[1]*60 + check_out_parts[2]\r\n        shift_out_seconds = shift_out_parts[0]*3600 + shift_out_parts[1]*60 + shift_out_parts[2]\r\n\r\n        if check_out_seconds < shift_out_seconds:\r\n            diff_seconds = shift_out_seconds - check_out_seconds\r\n\r\n            hours = int(diff_seconds // 3600)\r\n            minutes = int((diff_seconds % 3600) // 60)\r\n            seconds = int(diff_seconds % 60)\r\n\r\n            row.early_going_hours = f\"{hours:02}:{minutes:02}:{seconds:02}\"\r\n        else:\r\n            row.early_going_hours = \"00:00:00\"\r\n\r\n",
  "script_type": "DocType Event"
 }
]